/**
 * \file
 *
 * \brief AUTOSAR EcuM
 *
 * This file contains the implementation of the AUTOSAR
 * module EcuM.
 *
 * \version 5.15.15
 *
 * \author Elektrobit Automotive GmbH, 91058 Erlangen, Germany
 *
 * Copyright 2005 - 2024 Elektrobit Automotive GmbH
 * All rights exclusively reserved for Elektrobit Automotive GmbH,
 * unless expressly agreed to otherwise.
 */

/* !LINKSTO EcuM.ASR403.EcuM2993,1 */
#ifndef ECUM_CFG_H
#define ECUM_CFG_H

/*==================[includes]==============================================*/

#include <Os.h>                 /* OS AppMode */
#include <Std_Types.h>          /* AUTOSAR standard types */
#include <EcuM_PbCfgTypes.h>

/*==================[macros]================================================*/

/* !LINKSTO EcuM.Impl.PBVariant.Hash,1 */
#if (defined ECUM_CFG_SIGNATURE)
#error ECUM_CFG_SIGNATURE already defined
#endif
#define ECUM_CFG_SIGNATURE [!"asc:getConfigSignature(as:modconf('EcuM')[1]//eb-list::*[not(child::*) and (node:configclass() = 'PreCompile') ])"!]U /* Compile time verification value */

#if (defined ECUM_PUBLIC_INFO_SIGNATURE)
#error ECUM_PUBLIC_INFO_SIGNATURE already defined
#endif
#define ECUM_PUBLIC_INFO_SIGNATURE [!"asc:getConfigSignature(node:difference(as:modconf('EcuM')[1]/CommonPublishedInformation//eb-list::*[not(child::*) and (node:configclass() = 'PublishedInformation') ], as:modconf('EcuM')[1]/CommonPublishedInformation/Release))"!]U /* PublicInfoSignature */

/*  Pre-processor switch to enable/diable relocateable postbuild config */
/* !LINKSTO EcuM.Impl.PBVariant.Relocatable,1 */
#if (defined ECUM_RELOCATABLE_CFG_ENABLE)
#error ECUM_RELOCATABLE_CFG_ENABLE already defined
#endif
#define ECUM_RELOCATABLE_CFG_ENABLE [!IF "node:existsAndTrue(as:modconf('EcuM')[1]/EcuMGeneral/EcuMRelocatablePbcfgEnable)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

/*------------------[EcuM Multi-Core implementation macros]-----------------------*/

[!VAR "MULTICORE_ENABLED" = "node:exists(as:modconf('Os')[1]/OsOS/OsNumberOfCores) and node:value(as:modconf('Os')/OsOS/OsNumberOfCores) > 1 and node:existsAndTrue(as:modconf('EcuM')/EcuMGeneral/EcuMEnableMulticore)"!]

[!VAR "PREHALT_SLAVE" = "node:existsAndTrue(as:modconf('EcuM')/EcuMGeneral/EcuMPreHaltSlaveCallout)"!]
[!VAR "WKS_LASTISBEST" = "node:existsAndTrue(as:modconf('EcuM')/EcuMGeneral/EcuMBswMWakeupIndicationLastIsBest)"!]

#if (defined ECUM_MULTICORE_ENABLED)
#error ECUM_MULTICORE_ENABLED already defined
#endif
/** \brief Preprocessor macro verifying if the multicore functionality is enabled. */
#define ECUM_MULTICORE_ENABLED [!IF "$MULTICORE_ENABLED"!]TRUE[!ELSE!]FALSE[!ENDIF!]

#if (defined ECUM_PREHALT_SLAVE)
#error ECUM_PREHALT_SLAVE already defined
#endif
/** \brief Preprocessor macro verifying if the EcuM_PreHaltSlave() callout function is enabled. */
#define ECUM_PREHALT_SLAVE [!IF "$PREHALT_SLAVE"!]TRUE[!ELSE!]FALSE[!ENDIF!]

#if (defined ECUM_BSWM_WKINDICATION_LAST_IS_BEST)
#error ECUM_BSWM_WKINDICATION_LAST_IS_BEST already defined
#endif
/** \brief Preprocessor macro verifying if the 'last is best' approach of indicating wakeup statuses to BswM is enabled */
#define ECUM_BSWM_WKINDICATION_LAST_IS_BEST [!IF "$WKS_LASTISBEST"!]TRUE[!ELSE!]FALSE[!ENDIF!]

#if (defined RTE_CONFIG_PRESENT)
#error RTE_CONFIG_PRESENT already defined
#endif
/** \brief Macro for preventing redundant declarations of EcuM_MainFunction(),
since the function prototype is also generated by the SchM or Rte. **/
#define RTE_CONFIG_PRESENT [!IF "node:exists(as:modconf('Rte'))"!]TRUE[!ELSE!]FALSE[!ENDIF!]

#if (defined ECUM_EB_SERVICE_API_NONE)
#error ECUM_EB_SERVICE_API_NONE already defined
#endif
/** \brief Definition that no service API is set as default **/
#define ECUM_EB_SERVICE_API_NONE 0U

#if (defined ECUM_EB_SERVICE_API_ASR32)
#error ECUM_EB_SERVICE_API_ASR32 already defined
#endif
/** \brief Definition that AUTOSAR 3.2 service API is set as default **/
#define ECUM_EB_SERVICE_API_ASR32 32U

#if (defined ECUM_EB_SERVICE_API_ASR40)
#error ECUM_EB_SERVICE_API_ASR40 already defined
#endif
/** \brief Definition that AUTOSAR 4.0 service API is set as default **/
#define ECUM_EB_SERVICE_API_ASR40 40U

#if (defined ECUM_EB_SERVICE_API_ASR_R2011)
#error ECUM_EB_SERVICE_API_ASR_R2011 already defined
#endif
/** \brief Definition that AUTOSAR R20-11 service API is set as default **/
#define ECUM_EB_SERVICE_API_ASR_R2011 80U

#if (defined ECUM_EB_ENABLE_ASR32_SERVICE_API)
#error ECUM_EB_ENABLE_ASR32_SERVICE_API already defined
#endif
/** \brief Definition whether AUTOSAR 3.2 service API for EcuM is enabled **/
#define ECUM_EB_ENABLE_ASR32_SERVICE_API                   [!//
[!IF "node:existsAndTrue(EcuMGeneral/EcuMServiceAPI/EcuMEnableASR32ServiceAPI)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

#if (defined ECUM_EB_ENABLE_ASR40_SERVICE_API)
#error ECUM_EB_ENABLE_ASR40_SERVICE_API already defined
#endif
/** \brief Definition whether AUTOSAR 4.0 service API for EcuM is enabled **/
#define ECUM_EB_ENABLE_ASR40_SERVICE_API                   [!//
[!IF "node:existsAndTrue(EcuMGeneral/EcuMServiceAPI/EcuMEnableASR40ServiceAPI)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

#if (defined ECUM_EB_DEFAULT_ASR_SERVICE_API)
#error ECUM_EB_DEFAULT_ASR_SERVICE_API already defined
#endif
/** \brief Definition of default service API **/
#define ECUM_EB_DEFAULT_ASR_SERVICE_API                    [!//
[!IF "EcuMGeneral/EcuMServiceAPI/EcuMDefaultASRServiceAPI = 'AUTOSAR_32'"!]ECUM_EB_SERVICE_API_ASR32
[!ELSEIF "EcuMGeneral/EcuMServiceAPI/EcuMDefaultASRServiceAPI = 'AUTOSAR_40'"!]ECUM_EB_SERVICE_API_ASR40
[!ELSEIF "EcuMGeneral/EcuMServiceAPI/EcuMDefaultASRServiceAPI = 'AUTOSAR_R20_11'"!]ECUM_EB_SERVICE_API_ASR_R2011
[!ELSE!]ECUM_EB_SERVICE_API_NONE
[!ENDIF!]

/** \brief Switch for DET usage */
/* !LINKSTO EcuM.ASR403.EcuM2983,1 */
#define ECUM_DEV_ERROR_DETECT      [!//
[!IF "node:existsAndTrue(EcuMGeneral/EcuMDevErrorDetect)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

#if (defined ECUM_INCLUDE_DET)
#error ECUM_INCLUDE_DET already defined
#endif
/** \brief Initialize Det module at startup **/
#define ECUM_INCLUDE_DET           [!//
[!IF "node:existsAndTrue(EcuMGeneral/EcuMIncludeDet)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

#if (defined ECUM_INCLUDE_DEM)
#error ECUM_INCLUDE_DEM already defined
#endif
/** \brief Initialize Dem module at startup **/
#define ECUM_INCLUDE_DEM           [!//
[!IF "node:existsAndTrue(EcuMGeneral/EcuMIncludeDem)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

#if (defined ECUM_INCLUDE_RTE)
#error ECUM_INCLUDE_RTE already defined
#endif
/** \brief Check if Rte is used in EcuM **/
#define ECUM_INCLUDE_RTE           [!//
[!IF "node:existsAndTrue(EcuMGeneral/EcuMRteUsage)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

#if (defined ECUM_USE_BOOTTARGET_SEC)
#error ECUM_USE_BOOTTARGET_SEC already defined
#endif
/** \brief Use special memory section for EcuM_BootTarget */
#define ECUM_USE_BOOTTARGET_SEC    [!//
[!IF "node:existsAndTrue(EcuMGeneral/EcuMUseBoottargetSec)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

#if (defined ECUM_VERSION_INFO_API)
#error ECUM_VERSION_INFO_API already defined
#endif
/** \brief Provide EcuM_GetVersionInfo() API !*/
#define ECUM_VERSION_INFO_API      [!//
[!IF "node:existsAndTrue(EcuMGeneral/EcuMVersionInfoApi)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

#if (defined ECUM_PROVIDE_SHUTDOWN_HOOK)
#error ECUM_PROVIDE_SHUTDOWN_HOOK already defined
#endif
/** \brief Provide minimalistic ShutdownHook() implementation */
#define ECUM_PROVIDE_SHUTDOWN_HOOK [!//
[!IF "node:existsAndTrue(EcuMGeneral/EcuMProvideShutdownHook)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

#define ECUM_ECUM_FIXED_SUPPORT    [!//
[!IF "node:existsAndTrue(EcuMConfiguration/eb-list::*[1]/EcuMFixedConfiguration/EcuMRunMinimumDuration) or node:existsAndFalse(EcuMConfiguration/eb-list::*[1]/EcuMFixedConfiguration/EcuMRunMinimumDuration)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

/*------------------[DEM/DET error configuration]---------------------------*/

#if (defined ECUM_PROD_ERR_RAM_CHECK_FAILURE)
#error ECUM_PROD_ERR_RAM_CHECK_FAILURE already defined
#endif
/** \brief Switch for DEM to DET reporting Ram Check Failure */
#define ECUM_PROD_ERR_RAM_CHECK_FAILURE                 [!//
[!IF "ReportToDem/EcuMRamChkFailedReportToDem = 'DEM'"!][!//
TS_PROD_ERR_REP_TO_DEM
[!ELSEIF "ReportToDem/EcuMRamChkFailedReportToDem = 'DET'"!][!//
TS_PROD_ERR_REP_TO_DET
[!ELSE!][!//
TS_PROD_ERR_DISABLE
[!ENDIF!][!//

#if (defined ECUM_PROD_ERR_CFG_DATA_INCONSISTENT)
#error ECUM_PROD_ERR_CFG_DATA_INCONSISTENT already defined
#endif
/** \brief Switch for DEM to DET reporting Configuration Data Inconsistent
 **
 ** This preprocessor macro belongs to a feature which is not supported by the
 ** current implementation. It is available for completeness reasons only. */
#define ECUM_PROD_ERR_CFG_DATA_INCONSISTENT             [!//
[!IF "ReportToDem/EcuMCfgDataInconsistentReportToDem = 'DEM'"!][!//
TS_PROD_ERR_REP_TO_DEM
[!ELSEIF "ReportToDem/EcuMCfgDataInconsistentReportToDem = 'DET'"!][!//
TS_PROD_ERR_REP_TO_DET
[!ELSE!][!//
TS_PROD_ERR_DISABLE
[!ENDIF!][!//

[!IF "ReportToDem/EcuMRamChkFailedReportToDem = 'DET'"!][!//
/** \brief DET error Id for Ram check failure */
#define ECUM_E_DEMTODET_RAM_CHECK_FAILED                [!//
[!"ReportToDem/EcuMRamChkFailedReportToDemDetErrorId"!]U

[!ENDIF!][!//
[!//
[!IF "ReportToDem/EcuMCfgDataInconsistentReportToDem = 'DET'"!][!//
/** \brief DET error Id for Inconsistent Configuration Data */
#define ECUM_E_DEMTODET_CONFIGURATION_DATA_INCONSISTENT [!//
[!"ReportToDem/EcuMCfgDataInconsistentReportToDemDetErrorId"!]U
[!ENDIF!][!//

#if (defined ECUM_PROD_ERR_ALL_RUN_REQUESTS_KILLED)
#error ECUM_PROD_ERR_ALL_RUN_REQUESTS_KILLED already defined
#endif
/** \brief Switch for DEM reporting of all run requests killed */
#define ECUM_PROD_ERR_ALL_RUN_REQUESTS_KILLED [!//
[!IF "node:exists(as:modconf('EcuM')[1]/EcuMConfiguration/eb-list::*[1]/EcuMCommonConfiguration/EcuMDemEventParameterRefs/ECUM_E_ALL_RUN_REQUESTS_KILLED)"!][!//
TS_PROD_ERR_REP_TO_DEM
[!ELSE!][!//
TS_PROD_ERR_DISABLE
[!ENDIF!][!//

/*------------------[User defined initialization switches]------------------*/
[!SELECT "EcuMConfiguration/eb-list::*[1]/EcuMCommonConfiguration"!][!//

/** \brief Switch for usage of EcuM_Al_DriverInitZero */
#define ECUM_INITLIST_ZERO      [!//
[!IF "node:exists(EcuMDriverInitListZero)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

/** \brief Switch for usage of EcuM_Al_DriverInitOne */
#define ECUM_INITLIST_ONE       [!//
[!IF "node:exists(EcuMDriverInitListOne)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

/** \brief Switch for usage of EcuM_Al_DriverRestart */
#define ECUM_INITLIST_RESTART   [!//
[!IF "node:exists(EcuMDriverRestartList)"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

/*------------------[EcuM Flex User Config]--------------------------------------*/

/* Symbolic names which can be used for all function argument of type
 * EcuM_UserType */
[!LOOP "../EcuMFlexConfiguration/EcuMFlexUserConfig/eb-list::*"!][!//
#if (defined EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!])
#error EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!] already defined
#endif
/** \brief Identifier for the EcuM user "[!"as:name(.)"!]" */
#define EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!]   [!"EcuMFlexUser"!]U

#if (defined ECUM_PROVIDE_LEGACY_SYMBOLIC_NAMES)
#if (defined EcuM_[!"as:name(.)"!])
#error EcuM_[!"as:name(.)"!] already defined
#endif
/** \brief Export symbolic name value with module abbreviation as prefix
 ** only (3.1 rev4 < AUTOSAR version <= AUTOSAR 4.0 rev2) */
#define EcuM_[!"as:name(.)"!]   [!"EcuMFlexUser"!]U
#endif /* ECUM_PROVIDE_LEGACY_SYMBOLIC_NAMES */

[!ENDLOOP!][!//

#define ECUM_FIXED_NUM_FIXED_USERS [!"num:i(count(../EcuMFixedConfiguration/EcuMFixedUserConfig/eb-list::*))"!]U
/*------------------[Wakeup Sources]----------------------------------------*/

#if (defined ECUM_COMM_CHANNELS_NUMBER)
#error ECUM_COMM_CHANNELS_NUMBER already defined
#endif
/** \brief Number of individual chanels configured in EcuM */ 
#define ECUM_COMM_CHANNELS_NUMBER [!"num:i(count(util:distinct(node:refs(as:modconf('EcuM')[1]/EcuMConfiguration/eb-list::*[1]/EcuMCommonConfiguration/EcuMWakeupSource/eb-list::*/EcuMComMChannelRef))))"!]U

#if (defined ECUM_COMM_PNC_NUMBER)
#error ECUM_COMM_PNC_NUMBER already defined
#endif
/** \brief Number of individual Pncs configured in EcuM */ 
#define ECUM_COMM_PNC_NUMBER [!"num:i(count(util:distinct(node:refs(as:modconf('EcuM')[1]/EcuMConfiguration/eb-list::*[1]/EcuMCommonConfiguration/EcuMWakeupSource/eb-list::*/EcuMComMPNCRef))))"!]U

#if (defined ECUM_COMM_NUM_CHANNELS_BYTES)
#error ECUM_COMM_NUM_CHANNELS_BYTES already defined
#endif
/** \brief Number of bytes needed by ComM channels (each bit represents an individual ComM channel) */ 
[!IF "num:i(count(util:distinct(node:refs(as:modconf('EcuM')[1]/EcuMConfiguration/eb-list::*[1]/EcuMCommonConfiguration/EcuMWakeupSource/eb-list::*/EcuMComMChannelRef)))) > 0"!][!//
#define ECUM_COMM_NUM_CHANNELS_BYTES (((ECUM_COMM_CHANNELS_NUMBER - 1U) / 8U) + 1U)
[!ELSE!][!//
#define ECUM_COMM_NUM_CHANNELS_BYTES 0U
[!ENDIF!]

#if (defined ECUM_COMM_NUM_PNCS_BYTES)
#error ECUM_COMM_NUM_PNCS_BYTES already defined
#endif
/** \brief Number of bytes needed by ComM Pncs (each bit represents an individual ComM PNC) */ 
[!IF "num:i(count(util:distinct(node:refs(as:modconf('EcuM')[1]/EcuMConfiguration/eb-list::*[1]/EcuMCommonConfiguration/EcuMWakeupSource/eb-list::*/EcuMComMPNCRef)))) > 0"!][!//
#define ECUM_COMM_NUM_PNCS_BYTES (((ECUM_COMM_PNC_NUMBER - 1U) / 8U) + 1U)
[!ELSE!][!//
#define ECUM_COMM_NUM_PNCS_BYTES 0U
[!ENDIF!]


#if (defined ECUM_CROSS_CORE_COMM_WAKEUP)
#error ECUM_CROSS_CORE_COMM_WAKEUP already defined
#endif
/** \brief Enables ComM, EcuM configuration in RTE*/ 
#define ECUM_CROSS_CORE_COMM_WAKEUP [!//
[!IF "node:existsAndTrue(as:modconf('EcuM')[1]/EcuMGeneral/EcuMCrossCoreComMWakeup)"!]TRUE[!ELSE!]FALSE[!ENDIF!]

[!LOOP "EcuMWakeupSource/eb-list::*"!][!//
#if (defined EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!])
#error EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!] already defined
#endif
/** \brief Identifier for wakeup source [!"as:name(.)"!] */
#define EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!]   [!"node:value(./EcuMWakeupSourceId)"!]U

#if (defined ECUM_PROVIDE_LEGACY_SYMBOLIC_NAMES)
#if (defined EcuM_[!"as:name(.)"!])
#error EcuM_[!"as:name(.)"!] already defined
#endif
/** \brief Export symbolic name value with module abbreviation as prefix
 ** only (3.1 rev4 < AUTOSAR version <= AUTOSAR 4.0 rev2) */
#define EcuM_[!"as:name(.)"!]   [!"bit:bitset(0, EcuMWakeupSourceId)"!]U
#endif /* ECUM_PROVIDE_LEGACY_SYMBOLIC_NAMES */

[!ENDLOOP!][!//
[!//
/** \brief Number of wakeup sources */
#define ECUM_WKSCONFIGNUM          [!//
[!"num:i(count(EcuMWakeupSource/eb-list::*))"!]U

/** \brief Maximum value of Wakeup Source ID */
#define ECUM_WKS_ID_MAXVAL          [!//
[!"num:i(num:max(EcuMWakeupSource/eb-list::*/EcuMWakeupSourceId))"!]U

/** \brief Bit mask of all wakeup sources */
#define ECUM_WKSMASKALL (EcuM_WakeupSourceType)(\
[!LOOP "EcuMWakeupSource/eb-list::*"!][!//
   ((EcuM_WakeupSourceType)1U << EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!]) | \
[!ENDLOOP!][!//
   0U)

/** \brief Bit mask of wakeup sources with no validation All standard WKS
 * require no validation */
#define ECUM_WKSMASKNOVAL (EcuM_WakeupSourceType)(\
[!LOOP "EcuMWakeupSource/eb-list::*[not(node:exists(EcuMValidationTimeout))]"!][!//
   ((EcuM_WakeupSourceType)1U << EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!]) | \
[!ENDLOOP!][!//
   0U)

/** \brief Bit mask of wakeup sources with ComM channel */
#define ECUM_WKSMASKCOMMCH (EcuM_WakeupSourceType)(\
[!LOOP "EcuMWakeupSource/eb-list::*[node:refexists(EcuMComMChannelRef)]"!][!//
   ((EcuM_WakeupSourceType)1U << EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!]) | \
[!ENDLOOP!][!//
   0U)

/** \brief Switch to enable handling of wakeup sources with ComM channel */
#define ECUM_WKS_COMMCH_ENABLED    [!//
[!IF "count(util:distinct(node:refs(EcuMWakeupSource/eb-list::*/EcuMComMChannelRef))) > 0"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

/** \brief Bit mask of wakeup sources with ComM PNCs */
#define ECUM_WKSMASKCOMMPNC (EcuM_WakeupSourceType)(\
[!LOOP "EcuMWakeupSource/eb-list::*[node:refexists(EcuMComMPNCRef)]"!][!//
   ((EcuM_WakeupSourceType)1U << EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!]) | \
[!ENDLOOP!][!//
   0U)

/** \brief Switch to enable handling of wakeup sources with ComM PNC */
#define ECUM_WKS_COMMPNC_ENABLED    [!//
[!IF "count(util:distinct(node:refs(EcuMWakeupSource/eb-list::*/EcuMComMPNCRef))) > 0"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

/*------------------[Sleep modes]-------------------------------------------*/
/* !LINKSTO EcuM.SWS_EcuM_02957,1 */
/** \brief number of sleep modes */
#define ECUM_SLEEPMODECONFIGNUM    [!//
[!"num:i(count(EcuMSleepMode/eb-list::*))"!]U

[!LOOP "util:distinct(node:order(EcuMSleepMode/eb-list::*,'node:value(EcuMSleepModeId)'))"!][!//
#if (defined EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!])
#error EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!] already defined
#endif

/** \brief Identifier for sleep mode [!"as:name(.)"!] */
#define EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!]   [!"num:inttohex(EcuMSleepModeId)"!]U

#if (defined ECUM_PROVIDE_LEGACY_SYMBOLIC_NAMES)
#if (defined EcuM_[!"as:name(.)"!])
#error EcuM_[!"as:name(.)"!] already defined
#endif
/** \brief Export symbolic name value with module abbreviation as prefix
 ** only (3.1 rev4 < AUTOSAR version <= AUTOSAR 4.0 rev2) */
#define EcuM_[!"as:name(.)"!]   [!"num:inttohex(EcuMSleepModeId)"!]U
#endif /* ECUM_PROVIDE_LEGACY_SYMBOLIC_NAMES */

/** \brief Wakeup event mask of sleep mode [!"as:name(.)"!] */
#define ECUM_[!"as:name(.)"!]_WKUP_MASK (\
[!LOOP "EcuMWakeupSourceMask/eb-list::*"!][!//
((EcuM_WakeupSourceType)1U << EcuMConf_[!"node:name(as:ref(.)/..)"!]_[!"as:name(as:ref(.))"!]) | \
[!ENDLOOP!][!//
0U)
[!ENDLOOP!][!//


[!ENDSELECT!]
/*------------------[Mcu Mode]----------------------------------------------*/
[!SELECT "EcuMConfiguration/eb-list::*[1]/EcuMFlexConfiguration"!][!//
[!//
[!//An xdm check ensures that the reference is valid for EcuMNormalMcuModeRef.
#if (defined [!//
McuConf_[!"node:name(node:dtos(as:ref(./EcuMNormalMcuModeRef)))"!]_[!"as:name(as:ref(EcuMNormalMcuModeRef))"!])
#define ECUM_NORMALMCUMODE   [!//
McuConf_[!"node:name(node:dtos(as:ref(./EcuMNormalMcuModeRef)))"!]_[!"as:name(as:ref(EcuMNormalMcuModeRef))"!]  [!//
/* [!"as:ref(EcuMNormalMcuModeRef)/McuMode"!]U */
#else
#define ECUM_NORMALMCUMODE   [!//
[!"as:name(as:ref(EcuMNormalMcuModeRef))"!]   [!//
/* [!"as:ref(EcuMNormalMcuModeRef)/McuMode"!]U */
#endif

/*------------------[Reset Modes]----------------------------------------------*/
/* !LINKSTO EcuM.SWS_EcuM_04005,1 */
[!LOOP "EcuMResetMode/eb-list::*"!][!//
#if (defined EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!])
#error EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!] already defined
#endif
/** \brief Identifier for reset modes [!"as:name(.)"!] */
[!IF "../../../../../EcuMGeneral/EcuMServiceAPI/EcuMDefaultASRServiceAPI = 'AUTOSAR_R20_11'"!][!//
#define EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!]   [!"num:i(EcuMResetModeId + 256)"!]U
[!ELSE!][!//
#define EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!]   [!"EcuMResetModeId"!]U
[!ENDIF!][!//

#if (defined ECUM_PROVIDE_LEGACY_SYMBOLIC_NAMES)
#if (defined EcuM_[!"as:name(.)"!])
#error EcuM_[!"as:name(.)"!] already defined
#endif
/** \brief Export symbolic name value with module abbreviation as prefix
 ** only (3.1 rev4 < AUTOSAR version <= AUTOSAR 4.0 rev2) */
#define EcuM_[!"as:name(.)"!]   [!"EcuMResetModeId"!]U
#endif /* ECUM_PROVIDE_LEGACY_SYMBOLIC_NAMES */
[!ENDLOOP!][!//

/*------------------[Shutdown Causes]----------------------------------------------*/
/* !LINKSTO EcuM.SWS_EcuM_04007,1 */
[!LOOP "EcuMShutdownCause/eb-list::*"!][!//
#if (defined EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!])
#error EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!] already defined
#endif
/** \brief Identifier for reset modes [!"as:name(.)"!] */
#define EcuMConf_[!"node:name(..)"!]_[!"as:name(.)"!]   [!"EcuMShutdownCauseId"!]U

#if (defined ECUM_PROVIDE_LEGACY_SYMBOLIC_NAMES)
[!// The following macros are also generated by the Rte
#if (defined EcuM_[!"as:name(.)"!])
#error EcuM_[!"as:name(.)"!] already defined
#endif
/** \brief Export symbolic name value with module abbreviation as prefix
 ** only (3.1 rev4 < AUTOSAR version <= AUTOSAR 4.0 rev2) */
#define EcuM_[!"as:name(.)"!]   [!"EcuMShutdownCauseId"!]U
#endif /* ECUM_PROVIDE_LEGACY_SYMBOLIC_NAMES */

[!ENDLOOP!][!//
/** \brief Number of shutdown causes */
#define ECUM_SHUTDOWNCAUSECONFIGNUM          [!//
[!"num:i(count(EcuMShutdownCause/eb-list::*))"!]U

[!ENDSELECT!]




/*------------------[Defensive programming]---------------------------------*/
[!SELECT "EcuMDefensiveProgramming"!][!//

#if (defined ECUM_DEFENSIVE_PROGRAMMING_ENABLED)
#error ECUM_DEFENSIVE_PROGRAMMING_ENABLED is already defined
#endif
/** \brief Defensive programming usage
 **
 ** En- or disables the usage of the defensive programming */
#define ECUM_DEFENSIVE_PROGRAMMING_ENABLED   [!//
[!IF "(../EcuMGeneral/EcuMDevErrorDetect  = 'true') and (EcuMDefProgEnabled = 'true')"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

#if (defined ECUM_PRECONDITION_ASSERT_ENABLED)
#error ECUM_PRECONDITION_ASSERT_ENABLED is already defined
#endif
/** \brief Precondition assertion usage
 **
 ** En- or disables the usage of precondition assertion checks */
#define ECUM_PRECONDITION_ASSERT_ENABLED     [!//
[!IF "(../EcuMGeneral/EcuMDevErrorDetect  = 'true') and (EcuMDefProgEnabled = 'true') and (EcuMPrecondAssertEnabled = 'true')"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

#if (defined ECUM_POSTCONDITION_ASSERT_ENABLED)
#error ECUM_POSTCONDITION_ASSERT_ENABLED is already defined
#endif
/** \brief Postcondition assertion usage
 **
 ** En- or disables the usage of postcondition assertion checks */
#define ECUM_POSTCONDITION_ASSERT_ENABLED    [!//
[!IF "(../EcuMGeneral/EcuMDevErrorDetect  = 'true') and (EcuMDefProgEnabled = 'true') and (EcuMPostcondAssertEnabled = 'true')"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

#if (defined ECUM_UNREACHABLE_CODE_ASSERT_ENABLED)
#error ECUM_UNREACHABLE_CODE_ASSERT_ENABLED is already defined
#endif
/** \brief Unreachable code assertion usage
 **
 ** En- or disables the usage of unreachable code assertion checks */
#define ECUM_UNREACHABLE_CODE_ASSERT_ENABLED [!//
[!IF "(../EcuMGeneral/EcuMDevErrorDetect  = 'true') and (EcuMDefProgEnabled = 'true') and (EcuMUnreachAssertEnabled = 'true')"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

#if (defined ECUM_INVARIANT_ASSERT_ENABLED)
#error ECUM_INVARIANT_ASSERT_ENABLED is already defined
#endif
/** \brief Invariant assertion usage
 **
 ** En- or disables the usage of invariant assertion checks */
#define ECUM_INVARIANT_ASSERT_ENABLED        [!//
[!IF "(../EcuMGeneral/EcuMDevErrorDetect  = 'true') and (EcuMDefProgEnabled = 'true') and (EcuMInvariantAssertEnabled = 'true')"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

#if (defined ECUM_STATIC_ASSERT_ENABLED)
#error ECUM_STATIC_ASSERT_ENABLED is already defined
#endif
/** \brief Static assertion usage
 **
 ** En- or disables the usage of static assertion checks */
#define ECUM_STATIC_ASSERT_ENABLED           [!//
[!IF "(../EcuMGeneral/EcuMDevErrorDetect  = 'true') and (EcuMDefProgEnabled = 'true') and (EcuMStaticAssertEnabled = 'true')"!]STD_ON[!ELSE!]STD_OFF[!ENDIF!]

[!ENDSELECT!][!//


/*==================[type definitions]======================================*/


/*==================[external function declarations]========================*/
[!SELECT "EcuMConfiguration/eb-list::*[1]"!][!//
#define ECUM_START_SEC_CODE
#include <EcuM_MemMap.h>

[!IF "node:exists(EcuMCommonConfiguration/EcuMDriverInitListOne)"!][!//
/** \brief Callout for driver initialization sequence one for EcuM.
 **
 ** This is the configuration specific callout called from
 ** EcuM_AL_DriverInitOne().  This function contains the Initialization
 ** of Modules configured in EcuMDriverInitListOne
 **
 ** \param[in] ConfigPtr Pointer to the EcuM post-build configuration which
 ** contains pointers to all other BSW module post-build configurations. */
extern FUNC(void, ECUM_APPL_CODE) EcuM_DriverInitListOne
(
  P2CONST(EcuM_ConfigType, AUTOMATIC, ECUM_CONST) ConfigPtr
);
[!ENDIF!][!//

[!IF "node:exists(EcuMCommonConfiguration/EcuMDriverRestartList)"!][!//
/** \brief Callout for restarting drivers for EcuM.
 **
 ** This is the configuration specific callout called from
 ** EcuM_AL_DriverRestart().  This function contains the Initialization
 ** of Modules configured in EcuMDriverRestartList
 **
 ** \param[in] ConfigPtr Pointer to the EcuM post-build configuration which
 ** contains pointers to all other BSW module post-build configurations. */
extern FUNC(void, ECUM_APPL_CODE) EcuM_DriverRestartList
(
  P2CONST(EcuM_ConfigType, AUTOMATIC, ECUM_CONST) ConfigPtr
);
[!ENDIF!][!//

[!ENDSELECT!][!//

[!IF "node:existsAndTrue(EcuMGeneral/EcuMProvideShutdownHook)"!][!//
/** \brief Hook routine called by Os during shutdown.
 **
 ** This hook routine is called by the operating system when the
 ** OS service ShutdownOS has been called. This routine is called
 ** during the operating system shut down.
 **
 ** If enabled by configuration, the EcuM provides a minimalistic
 ** implementation of the ShutdownHook() callback function for the Os.
 **
 ** \param[in] errorID Implementation dependent error value */

extern void ShutdownHook(StatusType errorID);
[!ENDIF!][!//

#define ECUM_STOP_SEC_CODE
#include <EcuM_MemMap.h>

/*==================[internal function declarations]========================*/

/*==================[external constants]====================================*/

/*==================[internal constants]====================================*/

/*==================[external data]=========================================*/

/*==================[internal data]=========================================*/

/*==================[external function definitions]=========================*/

/*==================[internal function definitions]=========================*/

#endif /* ifndef ECUM_CFG_H */
/*==================[end of file]===========================================*/

